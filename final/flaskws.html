<!DOCTYPE html>
<html>
<head>
    <title>Flask-SocketIO</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.0.1/socket.io.min.js"></script>
    <script type="text/javascript">
        document.addEventListener('DOMContentLoaded', (event) => {
            const socket = io.connect('https://localhost:5000');

            socket.on('connect', function() {
                console.log('连接成功');
                startHeartbeat();
            });

            socket.on('disconnect', function() {
                console.log('连接断开');
                stopHeartbeat();
            });

            socket.on('message', function(data) {
                console.log('收到消息: ' + data.data);
            });

            socket.on('pong', function(data) {
                console.log('收到心跳响应');
            });

            function startHeartbeat() {
                setInterval(function() {
                    socket.emit('ping');
                }, 5000);
            }

            function stopHeartbeat() {
                clearInterval();
            }
        });
    </script>
</head>
<body>
    <h1>Flask-SocketIO WebSocket 示例</h1>
</body>
</html>
